"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),v=require("@element-plus/icons-vue"),_=require("@element-plus/pro-utils"),l=require("element-plus"),j=require("../node_modules/.pnpm/mitt@3.0.1/node_modules/mitt/dist/mitt.js"),M=require("./components/index.js"),O=require("./props.js");require("./style/index.scss.js");function F(c){return typeof c=="function"||Object.prototype.toString.call(c)==="[object Object]"&&!e.isVNode(c)}const k=e.defineComponent((c,s)=>{const{inline:h,modelValue:g={},items:V,span:y=3,actions:N}=c,R=j.default(),f=e.ref(),w=e.ref(),S=Object.keys(g).length?g:{},d=e.ref(S),i=e.ref(!1),m=e.computed(()=>V==null?void 0:V.sort((t,r)=>{const n=r!=null&&r.order?r.order:0;return(t!=null&&t.order?t.order:n+1)+n})),p=e.computed(()=>{var r,n;return(s.slots["right-tools"]?(n=(r=s.slots)["right-tools"])==null?void 0:n.call(r):[]).filter(({type:o})=>String(o)!="Symbol(Comment)")}),B=()=>s.emit("search",e.toRaw(d.value)),E=()=>w.value.resetFields(),A=t=>s.emit("onActions",t);s.expose({resetFields:E}),e.watch(()=>d,t=>{s.emit("update:modelValue",t.value)},{deep:!0});const C=()=>Array.isArray(N)&&N.length?e.createVNode(e.Fragment,null,[N.map((t,r)=>t!=null&&t.content?e.createVNode(l.ElButton,e.mergeProps(t,{onClick:()=>A(r)}),{default:()=>[t.content]}):t)]):e.createVNode(e.Fragment,null,[e.createVNode(l.ElButton,{type:"primary",onClick:B},{default:()=>[c.searchText]}),e.createVNode(l.ElButton,{onClick:E},{default:()=>[c.resetText]})]),q=()=>{const t=()=>{if(p.value.length>1){let o;return e.createVNode(l.ElDropdown,null,{default:()=>[e.createVNode(l.ElButton,{icon:v.MoreFilled,circle:!0},null)],dropdown:e.createVNode(l.ElDropdownMenu,null,F(o=p.value.map((a,u)=>e.createVNode(l.ElDropdownItem,{key:u,onClick:()=>s.emit("tools",d.value,u)},{default:()=>[[a]]})))?o:{default:()=>[o]})})}return[p.value[0]]},r=()=>{const o=c.rightTools;if(o)if(Array.isArray(o)&&o.length){let a;return e.createVNode(l.ElDropdown,null,{default:()=>[e.createVNode(l.ElButton,{icon:v.MoreFilled,circle:!0},null)],dropdown:e.createVNode(l.ElDropdownMenu,null,F(a=o.map((u,I)=>e.createVNode(l.ElDropdownItem,{key:I},{default:()=>[n(u)||u]})))?a:{default:()=>[a]})})}else return Reflect.ownKeys(o).length?n(o):o},n=(o,a)=>{var u;return!o.__v_isVNode&&((u=Object.keys(o))!=null&&u.length)?e.createVNode(l.ElButton,e.mergeProps(o,{key:a||"tool",onClick:()=>s.emit("tools",e.toRaw(d.value),a)}),{default:()=>[o.content]}):null};return e.createVNode("div",{class:"tools-container"},[p.value.length?t():r()])},D=t=>{new ResizeObserver(()=>{f.value.offsetWidth}).observe(t)};return e.onMounted(()=>{f.value&&D(f.value)}),()=>e.createVNode("div",{class:"pro-search-bar",style:{display:"flex",justifyContent:"space-between",flexDirection:h?"row":"column"}},[m.value.length>0&&e.createVNode(e.Fragment,null,[e.createVNode("div",{ref:f},[e.createVNode(l.ElForm,{ref:w,model:d.value,inline:h,class:["search-bar",[i.value?"expand":"inexpand"]]},{default:()=>[m.value.slice(0,i.value?m.value.length:y).map(t=>{const{dataField:r,label:n,labelWidth:o}=t,a=t.valueType=="checkbox"?"":n;return e.createVNode(l.ElFormItem,{prop:r,label:a,"label-width":o},{default:()=>[e.createVNode(M.default,{modelValue:d.value[r],"onUpdate:modelValue":u=>d.value[r]=u,emitter:R,formItem:t},null)]})}),e.createVNode(l.ElFormItem,null,{default:()=>[C(),m.value.length>y&&e.createVNode(l.ElButton,{type:"primary",link:!0,onClick:()=>i.value=!i.value},{default:()=>[e.createVNode(l.ElIcon,null,{default:()=>[i.value?e.createVNode(v.ArrowUp,null,null):e.createVNode(v.ArrowDown,null,null)]}),e.createVNode("span",null,[i.value?"收起":"展开"])]})]})]})]),e.createVNode(q,null,null)])])},{name:"ProSearchBar"});k.props=O.default;const P=_.withInstall(k);exports.default=P;
